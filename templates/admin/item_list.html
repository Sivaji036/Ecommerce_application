{% extends 'admin/base.html' %}

{% block title %}View All Items{% endblock %}

{% block content %}

<div class="page-wrapper">

    <h2>Product List</h2>

<form method="GET" action="/user/products" class="d-flex align-items-center" style="width:auto;">
    <select name="category" class="form-select" style="width:150px;">
        <option value="">All Categories</option>
        {% for cat in categories %}
        <option value="{{ cat.category }}" {% if request.args.get('category') == cat.category %} selected {% endif %}>
            {{ cat.category }}
        </option>
        {% endfor %}
    </select>

    <button type="submit" class="btn btn-primary ms-2">
        Filter
    </button>

</form>

<br>
    <!-- Product Table -->
    <table class="product-table">
        <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>View</th>
            <th>Update</th>
            <th>Delete</th>
        </tr>

        {% for product in products %}
        <tr>
            <td>
                <img src="/static/uploads/product_images/{{ product.image }}" width="70" height="70">
            </td>
            <td>{{ product.name }}</td>
            <td>{{ product.category }}</td>
            <td>{{ product.price }}</td>

            <td><a class="action-view" href="/admin/view-item/{{ product.product_id }}">View</a></td>
            <td><a class="action-update" href="/admin/update-item/{{ product.product_id }}">Update</a></td>

            <td>
                <a class="action-delete"
                   href="/admin/delete-item/{{ product.product_id }}"
                   onclick="return confirm('Are you sure you want to delete this product?')">
                   Delete
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>

</div>

{% endblock %}
